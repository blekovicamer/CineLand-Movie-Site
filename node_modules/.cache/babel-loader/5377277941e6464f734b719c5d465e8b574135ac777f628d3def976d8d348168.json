{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, withModifiers as _withModifiers } from \"vue\";\nimport _imports_0 from '@/assets/images/profileimg.png';\nconst _hoisted_1 = {\n  class: \"flex relative mr-4 sm:mr-[130px]\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"svg\", {\n  class: \"mt-2 ml-1 cursor-pointer\",\n  width: \"24px\",\n  height: \"24px\",\n  viewBox: \"0 0 24 24\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  fill: \"gray\"\n}, [/*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M15.25 0a8.25 8.25 0 0 0-6.18 13.72L1 22.88l1.12 1 8.05-9.12A8.251 8.251 0 1 0 15.25.01V0zm0 15a6.75 6.75 0 1 1 0-13.5 6.75 6.75 0 0 1 0 13.5z\"\n})], -1 /* HOISTED */);\nconst _hoisted_3 = [_hoisted_2];\nconst _hoisted_4 = {\n  key: 0,\n  class: \"flex-grow\"\n};\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"absolute top-0 left-2 sm:left-auto\"\n}, [/*#__PURE__*/_createElementVNode(\"svg\", {\n  class: \"mt-2 ml-1 sm:ml-3 mt-3\",\n  width: \"17px\",\n  height: \"17px\",\n  viewBox: \"0 0 24 24\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  fill: \"gray\"\n}, [/*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M15.25 0a8.25 8.25 0 0 0-6.18 13.72L1 22.88l1.12 1 8.05-9.12A8.251 8.251 0 1 0 15.25.01V0zm0 15a6.75 6.75 0 1 1 0-13.5 6.75 6.75 0 0 1 0 13.5z\"\n})])], -1 /* HOISTED */);\nconst _hoisted_6 = {\n  key: 0,\n  class: \"mt-3\"\n};\nconst _hoisted_7 = [\"src\"];\nconst _hoisted_8 = {\n  class: \"ml-3 truncate\"\n};\nconst _hoisted_9 = {\n  class: \"px-3 v-else\"\n};\nconst _hoisted_10 = {\n  key: 0\n};\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_0,\n  alt: \"profile-img\",\n  class: \"h-10 rounded-full ml-2 sm:ml-5\"\n}, null, -1 /* HOISTED */);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", {\n    class: \"sm:hidden\",\n    onClick: _cache[0] || (_cache[0] = $event => $data.showSearchInput = true)\n  }, [..._hoisted_3]), $data.showSearchInput ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_createElementVNode(\"input\", {\n    ref: \"searchBox\",\n    type: \"text\",\n    class: \"rounded-full bg-[#9B3922] px-4 sm:px-9 w-full sm:w-60 h-10 mr-2 sm:mr-5 focus:outline-none\",\n    placeholder: \"Search\",\n    onInput: _cache[1] || (_cache[1] = (...args) => $options.debounceSearch && $options.debounceSearch(...args)),\n    onFocus: _cache[2] || (_cache[2] = (...args) => $options.handleFocus && $options.handleFocus(...args))\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), _hoisted_5])) : _createCommentVNode(\"v-if\", true), $data.showSearchInput ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 1,\n    ref: \"searchResultsContainer\",\n    class: \"z-50 absolute mt-12 ml-2 rounded bg-[#9B3922] w-full sm:w-60\",\n    onClick: _cache[4] || (_cache[4] = _withModifiers((...args) => $options.hideSearchResults && $options.hideSearchResults(...args), [\"self\"]))\n  }, [$data.showSearchResult ? (_openBlock(), _createElementBlock(\"ul\", _hoisted_6, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.searchResult, (movie, index) => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: index,\n      class: \"flex items-center border-b border-[#481E14] p-1\"\n    }, [_createVNode(_component_router_link, {\n      to: `/movie/${movie.id}`,\n      onClick: _cache[3] || (_cache[3] = $event => _ctx.showSearchResults = false)\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"img\", {\n        src: $options.posterPath(movie.poster_path),\n        alt: \"\",\n        class: \"w-16 sm:w-20 p-1\"\n      }, null, 8 /* PROPS */, _hoisted_7), _createElementVNode(\"span\", _hoisted_8, _toDisplayString(movie.title), 1 /* TEXT */)]),\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"to\"])]);\n  }), 128 /* KEYED_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"ul\", _hoisted_9, [_ctx.noResultFound ? (_openBlock(), _createElementBlock(\"li\", _hoisted_10, \"No result found\")) : _createCommentVNode(\"v-if\", true)])], 512 /* NEED_PATCH */)) : _createCommentVNode(\"v-if\", true), _hoisted_11]);\n}","map":{"version":3,"names":["_imports_0","class","_createElementVNode","width","height","viewBox","xmlns","fill","d","_hoisted_2","key","src","alt","_createElementBlock","_hoisted_1","onClick","_cache","$event","$data","showSearchInput","_hoisted_3","_hoisted_4","ref","type","placeholder","onInput","args","$options","debounceSearch","onFocus","handleFocus","_hoisted_5","_createCommentVNode","_withModifiers","hideSearchResults","showSearchResult","_hoisted_6","_Fragment","_renderList","searchResult","movie","index","_createVNode","_component_router_link","to","id","_ctx","showSearchResults","default","_withCtx","posterPath","poster_path","_hoisted_7","_hoisted_8","_toDisplayString","title","_","_hoisted_9","noResultFound","_hoisted_10","_hoisted_11"],"sources":["C:\\Users\\amerb\\movie-tmbd\\src\\components\\header\\SearchBar.vue"],"sourcesContent":["<template>\r\n  <div class=\"flex relative mr-4 sm:mr-[130px]\">\r\n    <div class=\"sm:hidden\" @click=\"showSearchInput = true\">\r\n      <svg\r\n        class=\"mt-2 ml-1 cursor-pointer\"\r\n        width=\"24px\"\r\n        height=\"24px\"\r\n        viewBox=\"0 0 24 24\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        fill=\"gray\"\r\n      >\r\n        <path\r\n          d=\"M15.25 0a8.25 8.25 0 0 0-6.18 13.72L1 22.88l1.12 1 8.05-9.12A8.251 8.251 0 1 0 15.25.01V0zm0 15a6.75 6.75 0 1 1 0-13.5 6.75 6.75 0 0 1 0 13.5z\"\r\n        />\r\n      </svg>\r\n    </div>\r\n\r\n    <div v-if=\"showSearchInput\" class=\"flex-grow\">\r\n      <input\r\n        ref=\"searchBox\"\r\n        type=\"text\"\r\n        class=\"rounded-full bg-[#9B3922] px-4 sm:px-9 w-full sm:w-60 h-10 mr-2 sm:mr-5 focus:outline-none\"\r\n        placeholder=\"Search\"\r\n        @input=\"debounceSearch\"\r\n        @focus=\"handleFocus\"\r\n      />\r\n\r\n      <div class=\"absolute top-0 left-2 sm:left-auto\">\r\n        <svg\r\n          class=\"mt-2 ml-1 sm:ml-3 mt-3\"\r\n          width=\"17px\"\r\n          height=\"17px\"\r\n          viewBox=\"0 0 24 24\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          fill=\"gray\"\r\n        >\r\n          <path\r\n            d=\"M15.25 0a8.25 8.25 0 0 0-6.18 13.72L1 22.88l1.12 1 8.05-9.12A8.251 8.251 0 1 0 15.25.01V0zm0 15a6.75 6.75 0 1 1 0-13.5 6.75 6.75 0 0 1 0 13.5z\"\r\n          />\r\n        </svg>\r\n      </div>\r\n    </div>\r\n\r\n    <div\r\n      v-if=\"showSearchInput\"\r\n      ref=\"searchResultsContainer\"\r\n      class=\"z-50 absolute mt-12 ml-2 rounded bg-[#9B3922] w-full sm:w-60\"\r\n      @click.self=\"hideSearchResults\"\r\n    >\r\n      <ul class=\"mt-3\" v-if=\"showSearchResult\">\r\n        <li\r\n          :key=\"index\"\r\n          v-for=\"(movie, index) in searchResult\"\r\n          class=\"flex items-center border-b border-[#481E14] p-1\"\r\n        >\r\n          <router-link :to=\"`/movie/${movie.id}`\" @click=\"showSearchResults = false\">\r\n            <img :src=\"posterPath(movie.poster_path)\" alt=\"\" class=\"w-16 sm:w-20 p-1\" />\r\n            <span class=\"ml-3 truncate\">{{ movie.title }} </span>\r\n          </router-link>\r\n        </li>\r\n      </ul>\r\n      <ul class=\"px-3 v-else\">\r\n        <li v-if=\"noResultFound\">No result found</li>\r\n      </ul>\r\n    </div>\r\n\r\n    <img\r\n      src=\"@/assets/images/profileimg.png\"\r\n      alt=\"profile-img\"\r\n      class=\"h-10 rounded-full ml-2 sm:ml-5\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      searchResult: [],\r\n      showSearchResult: false,\r\n      showSearchInput: false,\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    this.keyboardEvents();\r\n    window.addEventListener('click', this.handleClickOutside);\r\n  },\r\n\r\n  beforeUnmount() {\r\n    window.removeEventListener('click', this.handleClickOutside);\r\n  },\r\n\r\n  methods: {\r\n    async fetchSearch(term) {\r\n      try {\r\n        const response = await this.$http.get('/search/movie?query=' + term);\r\n        console.log('Search Results Response:', response.data);\r\n        this.searchResult = response.data.results;\r\n        this.showSearchResult = response.data.results ? true : false;\r\n      } catch (error) {\r\n        console.log('Error fetching search results:', error);\r\n      }\r\n    },\r\n\r\n    handleFocus() {\r\n      if (this.searchTerm != '') {\r\n        this.showSearchResult = true;\r\n      }\r\n    },\r\n\r\n    keyboardEvents() {\r\n      let windowObj = this;\r\n\r\n      window.addEventListener('keypress', (e) => {\r\n        if (e.keyCode == '47') {\r\n          e.preventDefault();\r\n          windowObj.$refs.searchBox.focus();\r\n        }\r\n      });\r\n      window.addEventListener('keydown', (e) => {\r\n        if (e.key == 'Escape') {\r\n          this.showSearchResult = false;\r\n          this.showSearchInput = false;\r\n        }\r\n      });\r\n    },\r\n\r\n    debounceSearch(event) {\r\n      clearTimeout(this.debounce);\r\n      this.debounce = setTimeout(() => {\r\n        if (event.target.value.length >= 2) {\r\n          this.fetchSearch(event.target.value);\r\n        }\r\n      }, 100);\r\n    },\r\n\r\n    posterPath(poster_path) {\r\n      if (poster_path) {\r\n        return `https://image.tmdb.org/t/p/w500` + poster_path;\r\n      } else {\r\n        return `https://via.placeholder.com/500x750`;\r\n      }\r\n    },\r\n\r\n    hideSearchResults() {\r\n      this.showSearchResult = false;\r\n    },\r\n\r\n    handleClickOutside(event) {\r\n      if (\r\n        this.showSearchResult &&\r\n        !this.$refs.searchResultsContainer.contains(event.target)\r\n      ) {\r\n        this.hideSearchResults();\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.truncate {\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}