{"ast":null,"code":"export default {\n  data() {\n    return {\n      searchResult: [],\n      showSearchResult: false,\n      showSearchInput: false\n    };\n  },\n  mounted() {\n    this.keyboardEvents();\n    window.addEventListener('click', this.handleClickOutside);\n  },\n  beforeUnmount() {\n    window.removeEventListener('click', this.handleClickOutside);\n  },\n  methods: {\n    async fetchSearch(term) {\n      try {\n        const response = await this.$http.get('/search/movie?query=' + term);\n        console.log('Search Results Response:', response.data);\n        this.searchResult = response.data.results;\n        this.showSearchResult = response.data.results ? true : false;\n      } catch (error) {\n        console.log('Error fetching search results:', error);\n      }\n    },\n    handleFocus() {\n      if (this.searchTerm != '') {\n        this.showSearchResult = true;\n      }\n    },\n    keyboardEvents() {\n      let windowObj = this;\n      window.addEventListener('keypress', e => {\n        if (e.keyCode == '47') {\n          e.preventDefault();\n          windowObj.$refs.searchBox.focus();\n        }\n      });\n      window.addEventListener('keydown', e => {\n        if (e.key == 'Escape') {\n          this.showSearchResult = false;\n          this.showSearchInput = false;\n        }\n      });\n    },\n    debounceSearch(event) {\n      clearTimeout(this.debounce);\n      this.debounce = setTimeout(() => {\n        if (event.target.value.length >= 2) {\n          this.fetchSearch(event.target.value);\n        }\n      }, 100);\n    },\n    posterPath(poster_path) {\n      if (poster_path) {\n        return `https://image.tmdb.org/t/p/w500` + poster_path;\n      } else {\n        return `https://via.placeholder.com/500x750`;\n      }\n    },\n    hideSearchResults() {\n      this.showSearchResult = false;\n    },\n    handleClickOutside(event) {\n      if (this.showSearchResult && !this.$refs.searchResultsContainer.contains(event.target)) {\n        this.hideSearchResults();\n      }\n    }\n  }\n};","map":{"version":3,"names":["data","searchResult","showSearchResult","showSearchInput","mounted","keyboardEvents","window","addEventListener","handleClickOutside","beforeUnmount","removeEventListener","methods","fetchSearch","term","response","$http","get","console","log","results","error","handleFocus","searchTerm","windowObj","e","keyCode","preventDefault","$refs","searchBox","focus","key","debounceSearch","event","clearTimeout","debounce","setTimeout","target","value","length","posterPath","poster_path","hideSearchResults","searchResultsContainer","contains"],"sources":["C:\\Users\\amerb\\movie-tmbd\\src\\components\\header\\SearchBar.vue"],"sourcesContent":["<template>\r\n  <div class=\"flex relative mr-4 sm:mr-[130px]\">\r\n    <div class=\"sm:hidden\" @click=\"showSearchInput = true\">\r\n      <svg\r\n        class=\"mt-2 ml-1 cursor-pointer\"\r\n        width=\"24px\"\r\n        height=\"24px\"\r\n        viewBox=\"0 0 24 24\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        fill=\"gray\"\r\n      >\r\n        <path\r\n          d=\"M15.25 0a8.25 8.25 0 0 0-6.18 13.72L1 22.88l1.12 1 8.05-9.12A8.251 8.251 0 1 0 15.25.01V0zm0 15a6.75 6.75 0 1 1 0-13.5 6.75 6.75 0 0 1 0 13.5z\"\r\n        />\r\n      </svg>\r\n    </div>\r\n\r\n    <div v-if=\"showSearchInput\" class=\"flex-grow\">\r\n      <input\r\n        ref=\"searchBox\"\r\n        type=\"text\"\r\n        class=\"rounded-full bg-[#9B3922] px-4 sm:px-9 w-full sm:w-60 h-10 mr-2 sm:mr-5 focus:outline-none\"\r\n        placeholder=\"Search\"\r\n        @input=\"debounceSearch\"\r\n        @focus=\"handleFocus\"\r\n      />\r\n\r\n      <div class=\"absolute top-0 left-2 sm:left-auto\">\r\n        <svg\r\n          class=\"mt-2 ml-1 sm:ml-3 mt-3\"\r\n          width=\"17px\"\r\n          height=\"17px\"\r\n          viewBox=\"0 0 24 24\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          fill=\"gray\"\r\n        >\r\n          <path\r\n            d=\"M15.25 0a8.25 8.25 0 0 0-6.18 13.72L1 22.88l1.12 1 8.05-9.12A8.251 8.251 0 1 0 15.25.01V0zm0 15a6.75 6.75 0 1 1 0-13.5 6.75 6.75 0 0 1 0 13.5z\"\r\n          />\r\n        </svg>\r\n      </div>\r\n    </div>\r\n\r\n    <div\r\n      v-if=\"showSearchInput\"\r\n      ref=\"searchResultsContainer\"\r\n      class=\"z-50 absolute mt-12 ml-2 rounded bg-[#9B3922] w-full sm:w-60\"\r\n      @click.self=\"hideSearchResults\"\r\n    >\r\n      <ul class=\"mt-3\" v-if=\"showSearchResult\">\r\n        <li\r\n          :key=\"index\"\r\n          v-for=\"(movie, index) in searchResult\"\r\n          class=\"flex items-center border-b border-[#481E14] p-1\"\r\n        >\r\n          <router-link :to=\"`/movie/${movie.id}`\" @click=\"showSearchResults = false\">\r\n            <img :src=\"posterPath(movie.poster_path)\" alt=\"\" class=\"w-16 sm:w-20 p-1\" />\r\n            <span class=\"ml-3 truncate\">{{ movie.title }} </span>\r\n          </router-link>\r\n        </li>\r\n      </ul>\r\n      <ul class=\"px-3 v-else\">\r\n        <li v-if=\"noResultFound\">No result found</li>\r\n      </ul>\r\n    </div>\r\n\r\n    <img\r\n      src=\"@/assets/images/profileimg.png\"\r\n      alt=\"profile-img\"\r\n      class=\"h-10 rounded-full ml-2 sm:ml-5\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      searchResult: [],\r\n      showSearchResult: false,\r\n      showSearchInput: false,\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    this.keyboardEvents();\r\n    window.addEventListener('click', this.handleClickOutside);\r\n  },\r\n\r\n  beforeUnmount() {\r\n    window.removeEventListener('click', this.handleClickOutside);\r\n  },\r\n\r\n  methods: {\r\n    async fetchSearch(term) {\r\n      try {\r\n        const response = await this.$http.get('/search/movie?query=' + term);\r\n        console.log('Search Results Response:', response.data);\r\n        this.searchResult = response.data.results;\r\n        this.showSearchResult = response.data.results ? true : false;\r\n      } catch (error) {\r\n        console.log('Error fetching search results:', error);\r\n      }\r\n    },\r\n\r\n    handleFocus() {\r\n      if (this.searchTerm != '') {\r\n        this.showSearchResult = true;\r\n      }\r\n    },\r\n\r\n    keyboardEvents() {\r\n      let windowObj = this;\r\n\r\n      window.addEventListener('keypress', (e) => {\r\n        if (e.keyCode == '47') {\r\n          e.preventDefault();\r\n          windowObj.$refs.searchBox.focus();\r\n        }\r\n      });\r\n      window.addEventListener('keydown', (e) => {\r\n        if (e.key == 'Escape') {\r\n          this.showSearchResult = false;\r\n          this.showSearchInput = false;\r\n        }\r\n      });\r\n    },\r\n\r\n    debounceSearch(event) {\r\n      clearTimeout(this.debounce);\r\n      this.debounce = setTimeout(() => {\r\n        if (event.target.value.length >= 2) {\r\n          this.fetchSearch(event.target.value);\r\n        }\r\n      }, 100);\r\n    },\r\n\r\n    posterPath(poster_path) {\r\n      if (poster_path) {\r\n        return `https://image.tmdb.org/t/p/w500` + poster_path;\r\n      } else {\r\n        return `https://via.placeholder.com/500x750`;\r\n      }\r\n    },\r\n\r\n    hideSearchResults() {\r\n      this.showSearchResult = false;\r\n    },\r\n\r\n    handleClickOutside(event) {\r\n      if (\r\n        this.showSearchResult &&\r\n        !this.$refs.searchResultsContainer.contains(event.target)\r\n      ) {\r\n        this.hideSearchResults();\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.truncate {\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}